## TODO (2025-11-24)

프로젝트 전반을 점검하면서 필요한 작업을 아래와 같이 정리했습니다.  
우선 순위는 **UI/UX → 안정성 → 운영/보안 → 확장** 순으로 고려합니다.

---

### 1. UI / UX 개편
- [ ] 디자인 시스템 재정립: AI가 그린 임시 UI를 걷어내고 Figma 시안을 기반으로 전면 리뉴얼.
- [ ] “내 캐릭터” 페이지 개선  
  - [ ] 업로드 진행/오류/성공 상태 표시  
  - [ ] 5MB 제한 및 권장 이미지 안내  
  - [ ] 재생성/삭제 시 확인 모달과 처리 중 비활성화
- [ ] 새 동화 만들기 화면  
  - [ ] 추천 캐릭터 + 내 캐릭터 섹션 구분, 선택 상태·최대 2명 제한 명확화  
  - [ ] 스토리 생성 진행률(텍스트/이미지/오디오 단계) 시각화
- [ ] 표지/페이지 미리보기에서 캐릭터 이름·이미지 정렬, 실패 시 재시도 버튼 제공

### 2. 백엔드 · AI 안정성
- [ ] FastAPI 429 대응: 사용자에게 “대기 중/재시도 중” 알림 API 제공, 프론트에서 표시.
- [ ] 이미지 재시도 로깅: 어느 요청이 몇 번째 백오프에서 성공/실패했는지 Kibana나 파일로 집계.
- [ ] 임시 업로드 디렉터리(`/Users/kyj/testpicturedir`) 자동 정리  
  - [ ] 성공 시 즉시 삭제 (이미 구현) 검증  
  - [ ] 실패/예외 시 주기적 배치 또는 앱 시작 시 청소 로직 도입
- [ ] 캐릭터 참조 이미지 무결성 체크  
  - [ ] 스토리 생성 전 `imageUrl` 존재 여부 검증 및 복구 플로우  
  - [ ] 삭제된 파일 감지 시 사용자에게 재모델링 안내
- [ ] 테스트: 커스텀 캐릭터 0/1/2명 + 새 캐릭터 0/1명 조합으로 텍스트→표지→페이지→오디오 전체 스모크 테스트 스크립트 작성

### 3. 운영 / 문서 / 스크립트
- [ ] README/TODO 최신화 ✔️ (이번에 반영)  
  - 향후 변경 시 PR 템플릿에 “문서 업데이트 여부” 확인란 추가
- [ ] `.env` 예시 템플릿(`.env.example`) 작성: Backend, AI, Frontend 각각에 필수 변수 설명
- [ ] 로컬 개발 편의를 위한 통합 실행 스크립트(예: `pnpm dev:all` 또는 `justfile`) 준비
- [ ] 로그/데이터 보존 정책 정리: 이미지·오디오·임시 파일 유지 기간 문서화
- [ ] 429, 이미지 실패, 오디오 실패 비율을 주기적으로 확인할 수 있는 간단한 통계 리포트(weekly)

### 4. 보안 / 개인정보
- [ ] 파일 업로드 검증 강화 (확장자/콘텐츠 타입/이미지 크기 검증)
- [ ] FastAPI의 `file://` 경로 접근 범위 제한 (sandbox 디렉터리 이외 접근 차단)
- [ ] JWT 만료/리프레시 전략 재검토 및 HTTPS 적용 계획 수립
- [ ] 커스텀 캐릭터/스토리/오디오 삭제 요청 시 실제 파일/DB 정리 확인
- [ ] 개인정보 파기/동의 내역 명세서 초안 작성

### 5. 향후 확장 아이디어 (선택)
- [ ] 이미지 생성 멀티 프로바이더 전략 (OpenAI / Imagen) 동적 선택
- [ ] 캐릭터 세부 속성(눈·소품·피부톤 등) 구조화 → 모델 프롬프트 자동화
- [ ] 리소스 큐(예: Redis + 워커) 도입으로 동시 요청 스로틀링
- [ ] 음성 커스터마이징(목소리 프리셋 선택, TTS 공급자 전환)
- [ ] 운영자가 기본 캐릭터 세트를 관리할 수 있는 Admin UI

---

필요 시 각 항목을 이슈/티켓으로 분리하고, 작업 완료 시 체크박스를 업데이트해 주세요. 지속적으로 변경 사항이 생기면 README/TODO를 함께 갱신하는 것을 권장합니다. 💪
